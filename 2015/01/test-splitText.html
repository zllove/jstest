<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>test</title>
</head>
<body>
<p id="p">foobar</p>
<script>
    var p = document.getElementById('p');
    var first = p.firstChild;
    var end = first.splitText(3);
    var span = document.createElement('span');
    span.appendChild(document.createTextNode(' span cotents '));
    p.insertBefore(span, end);
    console.log(end);
</script>
</body>
</html>