<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script>
    var obj = {
        animate : function(el, opts, callback, aniFn){
            var _easeInOutCubic = function(pos){
                if((pos /= 0.5) < 1) return 0.5 * Math.pow(pos, 3);
                return 0.5 * (Math.pow((pos - 2), 3) + 2);
            };
            opts = opts || {};
            var _this = this;
            var deStyle = {}, D = Date, d = new D, e, T = 500, o, F = function(x){
                return (aniFn || _easeInOutCubic)(x)
            };
            for(var i in opts){
                if(i == 'opacity') deStyle[i] = this.css(el, i); else deStyle[i] = parseInt(this.css(el, i));
            }
            return e = setInterval(function(){
                var z = Math.min(1, (new Date() - d) / 500);
                var z = Math.min(1, (new D - d) / T);
                for(var i in opts){
                    o = deStyle[i] - 0 + (opts[i] - deStyle[i]) * F(z);
                    _this.css(el, i, o);
                }
                if(z === 1){
                    clearInterval(e);
                    if(callback && typeof callback == 'function') callback();
                }
            }, 16);
        }
    }
    function foo(){
        var d = new Date();
        var timer = setInterval(function(){
            var z = Math.min(1, (new Date() - d) / 500);
            console.log(new Date() - d);
            console.log('aa',z);
            if(z === 1){
                clearInterval(timer);
            }
        }, 16);
    }
    foo();
</script>
</body>
</html>